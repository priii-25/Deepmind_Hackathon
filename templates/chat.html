<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Eve — AI Orchestrator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/static/css/chat.css?v={{ cache_bust }}"/>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>✦</text></svg>"/>
</head>
<body>
  <div class="app">

    <!-- ── Sidebar ────────────────────────────────── -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">✦</div>
        <h1>Eve</h1>
        <span class="version">v2.0</span>
      </div>

      <button class="new-chat-btn" onclick="newChat()">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
        New Chat
      </button>

      <div class="conversations-list" id="conversationsList">
        <!-- Populated by JS -->
      </div>

      <div class="sidebar-footer">
        Powered by Eve Orchestrator
      </div>
    </aside>

    <!-- ── Main Chat ──────────────────────────────── -->
    <main class="main">

      <!-- Header -->
      <div class="chat-header">
        <img id="headerAvatar" class="agent-avatar" src="" alt="agent"/>
        <div class="agent-info">
          <h2 id="agentName">Eve</h2>
          <span id="agentStatus">Chief of Staff</span>
        </div>
        <div class="agent-badge" id="agentBadge">
          <div class="pulse"></div>
          <span>Eve</span>
        </div>
      </div>

      <!-- Onboarding Progress (hidden until active) -->
      <div class="onboarding-progress" id="onboardingProgress" style="display:none">
        <div class="progress-steps">
          <div class="progress-step active" data-stage="brand_discovery">
            <div class="step-dot"></div>
            <span>Brand</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-step" data-stage="suggested_teammates">
            <div class="step-dot"></div>
            <span>Teem Mates</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-step" data-stage="connect_world">
            <div class="step-dot"></div>
            <span>Integrations</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-step" data-stage="personalization">
            <div class="step-dot"></div>
            <span>Preferences</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-step" data-stage="completed">
            <div class="step-dot"></div>
            <span>Ready!</span>
          </div>
        </div>
      </div>

      <!-- Messages -->
      <div class="messages-container" id="messages">
        <!-- Welcome Screen -->
        <div class="welcome" id="welcome">
          <img class="eve-avatar" id="welcomeAvatar" src="" alt="Eve"/>
          <h2>Hey, I'm Eve</h2>
          <p>Your Chief of Staff. I manage your Teem Mates, coordinate workflows, and make sure everything runs smoothly. What are we working on?</p>
          <div class="capabilities">
            <div class="capability" data-prompt="I need some marketing videos for my product">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--red)" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              Meet Kai — UGC Creator
            </div>
            <div class="capability" data-prompt="I need product photos for my fashion brand">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--pink)" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M3 9h18"/></svg>
              Meet Vera — Fashion Photographer
            </div>
            <div class="capability" data-prompt="I want to plan and schedule social media content">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--green)" stroke-width="2"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
              Meet Chad — Social Media
            </div>
            <div class="capability" data-prompt="I need to create a presentation for investors">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--amber)" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
              Meet Noa — Presentations
            </div>
            <div class="capability" data-prompt="I need someone to take notes in my meetings">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--blue)" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
              Meet Ivy — Notetaker
            </div>
            <div class="capability" data-prompt="Look up brand info for Nike">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
              Brand Research
            </div>
            <div class="capability onboard-cta" data-prompt="I'd like to set up my workspace" data-onboard="true">
              <svg class="cap-icon" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2"><path d="M9 12l2 2 4-4"/><circle cx="12" cy="12" r="10"/></svg>
              Set Up My Workspace
            </div>
          </div>
        </div>
      </div>

      <!-- Input Area -->
      <div class="input-area">
        <div id="uploadPreview" class="upload-preview"></div>
        <div class="input-wrapper">
          <textarea
            id="chatInput"
            rows="1"
            placeholder="Message Eve..."
            autocomplete="off"
          ></textarea>
          <div class="input-actions">
            <button class="input-btn" id="uploadBtn" title="Upload file">
              <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
              </svg>
            </button>
            <button class="input-btn send" id="sendBtn" title="Send message">
              <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
              </svg>
            </button>
          </div>
        </div>
        <input type="file" id="fileInput" multiple accept="image/*" style="display:none"/>
      </div>

    </main>
  </div>

  <script src="/static/js/avatars.js?v={{ cache_bust }}"></script>
  <script src="/static/js/chat.js?v={{ cache_bust }}"></script>
  <script>
    // Set welcome avatar after avatars.js loads
    document.getElementById('welcomeAvatar').src = getAvatar('eve');
  </script>
</body>
</html>
